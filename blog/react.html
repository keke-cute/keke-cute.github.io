<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-07-15 Wed 17:55 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>React</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="keke" />
<link rel="stylesheet" type="text/css" href="css/m-dark.css" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,400i,600%7CSource+Sans+Pro:400,400i,600&amp;subset=latin-ext" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">React</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgdf8a49b">1. gh-pages</a></li>
<li><a href="#org53c6242">2. dual page(手工添加)</a></li>
<li><a href="#orgabd0273">3. 1c</a>
<ul>
<li><a href="#org4eed06f">3.1. 组件使用函数</a></li>
<li><a href="#orgcb123f8">3.2. 解构props</a></li>
<li><a href="#org1e3eef2">3.3. 页面重渲染</a></li>
<li><a href="#org2cc56e5">3.4. 有状态组件</a></li>
<li><a href="#orgd8410a6">3.5. 鼠标事件处理</a></li>
</ul>
</li>
<li><a href="#orgeb62f44">4. 1d</a>
<ul>
<li><a href="#org7459765">4.1. 复杂状态(多useState处理)</a></li>
<li><a href="#org15347e1">4.2. 处理数组</a></li>
<li><a href="#org2998436">4.3. 条件渲染</a></li>
<li><a href="#org7a7aad1">4.4. Hook的规则</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgdf8a49b" class="outline-2">
<h2 id="orgdf8a49b"><span class="section-number-2">1</span> gh-pages</h2>
<div class="outline-text-2" id="text-1">
<div class="org-src-container">
<pre class="src src-shell">sudo yarn global add gh-pages --save-dev
</pre>
</div>
<p>
add code &#x2013;&gt; ./package.json
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #5b94ab;">"homepage"</span>: <span style="color: #5b94ab;">"./"</span>,
</pre>
</div>
<p>
add deploy &#x2013;&gt; ./package.json
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #5b94ab;">"scripts"</span>: <span style="color: #ff4500; font-weight: bold;">{</span>
    <span style="color: #5b94ab;">"deploy"</span>: <span style="color: #5b94ab;">"gh-pages -d build"</span>,
<span style="color: #ff4500; font-weight: bold;">}</span>
</pre>
</div>
<p>
build and deploy:
</p>
<div class="org-src-container">
<pre class="src src-shell">yarn run build
yarn run deploy
</pre>
</div>
</div>
</div>
<div id="outline-container-org53c6242" class="outline-2">
<h2 id="org53c6242"><span class="section-number-2">2</span> dual page(手工添加)</h2>
<div class="outline-text-2" id="text-2">
<p>
首先把配置文件提出:
</p>
<div class="org-src-container">
<pre class="src src-shell">yarn eject
</pre>
</div>
<p>
./config/paths.js
</p>
<div class="org-src-container">
<pre class="src src-js">appIndexJs: resolveModule<span style="color: #ff4500; font-weight: bold;">(</span>resolveApp, <span style="color: #5b94ab;">'src/index'</span><span style="color: #ff4500; font-weight: bold;">)</span>,
<span style="color: #6e7899; font-style: italic;">//</span><span style="color: #6e7899; font-style: italic;">&#20197;&#40664;&#35748;&#30340;&#20570;&#27169;&#26495;</span>
appXXXXXJs: resolveModule<span style="color: #ff4500; font-weight: bold;">(</span>resolveApp, <span style="color: #5b94ab;">'src/xxxxx'</span><span style="color: #ff4500; font-weight: bold;">)</span>,
</pre>
</div>
<p>
./config/webpack.config.js
</p>

<p>
入口:
</p>
<div class="org-src-container">
<pre class="src src-js">entry: <span style="color: #ff4500; font-weight: bold;">[</span>
    isEnvDevelopment &amp;&amp;
        require.resolve<span style="color: #ffd700; font-weight: bold;">(</span><span style="color: #5b94ab;">'react-dev-utils/webpackHotDevClient'</span><span style="color: #ffd700; font-weight: bold;">)</span>,
    paths.appIndexJs,
<span style="color: #ff4500; font-weight: bold;">]</span>.filter<span style="color: #ff4500; font-weight: bold;">(</span>Boolean<span style="color: #ff4500; font-weight: bold;">)</span>,
<span style="color: #e1c1ee;">]</span>,
<span style="color: #6e7899; font-style: italic;">//</span><span style="color: #6e7899; font-style: italic;">&#25226;&#26087;&#30340;&#21333;&#20837;&#21475;&#25913;&#20026;&#22810;&#20010;&#20837;&#21475;&#65292;&#36825;&#37324;&#25226;&#26087;&#30340;index.js&#25918;&#20837;main&#22359;&#20013;&#65292;&#26032;&#30340;xxxxxx.js&#25918;&#20837;xxxx&#22359;&#20013;</span>
entry: <span style="color: #e1c1ee;">{</span>
    main: <span style="color: #ff4500; font-weight: bold;">[</span>
        isEnvDevelopment &amp;&amp;
            require.resolve<span style="color: #ffd700; font-weight: bold;">(</span><span style="color: #5b94ab;">'react-dev-utils/webpackHotDevClient'</span><span style="color: #ffd700; font-weight: bold;">)</span>,
        paths.appIndexJs,
    <span style="color: #ff4500; font-weight: bold;">]</span>.filter<span style="color: #ff4500; font-weight: bold;">(</span>Boolean<span style="color: #ff4500; font-weight: bold;">)</span>,
    xxxx: <span style="color: #ff4500; font-weight: bold;">[</span>
        paths.xxxXxxxxJs,
    <span style="color: #ff4500; font-weight: bold;">]</span>.filter<span style="color: #ff4500; font-weight: bold;">(</span>Boolean<span style="color: #ff4500; font-weight: bold;">)</span>
<span style="color: #e1c1ee;">}</span>,
</pre>
</div>
<p>
出口:
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #6e7899; font-style: italic;">//</span><span style="color: #6e7899; font-style: italic;">before</span>
<span style="color: #5b94ab;">'static/js/.bundle.js'</span>
<span style="color: #6e7899; font-style: italic;">//</span><span style="color: #6e7899; font-style: italic;">after</span>
<span style="color: #5b94ab;">'static/js/[name].bundle.js'</span>
</pre>
</div>
<p>
new HtmlWebpackPlugin:
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">new</span> <span style="color: #b0a2e7;">HtmlWebpackPlugin</span><span style="color: #ff4500; font-weight: bold;">(</span>
    Object.assign<span style="color: #ffd700; font-weight: bold;">(</span>
        <span style="color: #ffff00; font-weight: bold;">{}</span>,
        <span style="color: #ffff00; font-weight: bold;">{</span>
            inject: <span style="color: #a6c1e0;">true</span>,
            template: paths.appHtml,
            chunks: <span style="color: #00ff7f; font-weight: bold;">[</span><span style="color: #5b94ab;">'main'</span><span style="color: #00ff7f; font-weight: bold;">]</span>,  <span style="color: #6e7899; font-style: italic;">//</span><span style="color: #6e7899; font-style: italic;">&#30001;&#20110;&#26087;index&#24050;&#34987;&#20998;&#31163;&#20026;main&#65292;&#29305;&#27492;&#28155;&#21152;</span>
        <span style="color: #ffff00; font-weight: bold;">}</span>,
<span style="color: #6e7899; font-style: italic;">//</span><span style="color: #6e7899; font-style: italic;">&#25353;&#29031;main&#36827;&#34892;&#26032;&#30340;&#26032;&#22686;:</span>
<span style="color: #819cd6; font-weight: bold;">new</span> <span style="color: #b0a2e7;">HtmlWebpackPlugin</span><span style="color: #ffff00; font-weight: bold;">(</span>   
    Object.assign<span style="color: #00ff7f; font-weight: bold;">(</span>
        <span style="color: #00ffff; font-weight: bold;">{}</span>,
        <span style="color: #00ffff; font-weight: bold;">{</span>
            inject: <span style="color: #a6c1e0;">true</span>,
            template: paths.appHtml,
            filename: <span style="color: #5b94ab;">'admin.html'</span>,
            chunks: <span style="color: #ff00ff; font-weight: bold;">[</span><span style="color: #5b94ab;">'admin'</span><span style="color: #ff00ff; font-weight: bold;">]</span> 
        <span style="color: #00ffff; font-weight: bold;">}</span>,
        .............<span style="color: #00ffff; font-weight: bold;">(</span>&#24050;&#30465;&#30053;<span style="color: #00ffff; font-weight: bold;">)</span>
            <span style="color: #e1c1ee;">}</span>
        : <span style="color: #a6c1e0;">undefined</span>
    <span style="color: #ffff00; font-weight: bold;">)</span>
<span style="color: #ffd700; font-weight: bold;">)</span>,
</pre>
</div>
</div>
</div>
<div id="outline-container-orgabd0273" class="outline-2">
<h2 id="orgabd0273"><span class="section-number-2">3</span> 1c</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org4eed06f" class="outline-3">
<h3 id="org4eed06f"><span class="section-number-3">3.1</span> 组件使用函数</h3>
<div class="outline-text-3" id="text-3-1">
<p>
before:
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">Hello</span> = <span style="color: #ff4500; font-weight: bold;">(</span>props<span style="color: #ff4500; font-weight: bold;">)</span> =&gt; <span style="color: #ff4500; font-weight: bold;">{</span>
  <span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">bornYear</span> = <span style="color: #ffd700; font-weight: bold;">()</span> =&gt; <span style="color: #ffd700; font-weight: bold;">{</span>
    <span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">yearNow</span> = <span style="color: #819cd6; font-weight: bold;">new</span> <span style="color: #b0a2e7;">Date</span><span style="color: #ffff00; font-weight: bold;">()</span>.getFullYear<span style="color: #ffff00; font-weight: bold;">()</span>
    <span style="color: #819cd6; font-weight: bold;">return</span> yearNow - props.age
  <span style="color: #ffd700; font-weight: bold;">}</span>
</pre>
</div>
<p>
after:
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">bornYear</span> = <span style="color: #ff4500; font-weight: bold;">()</span> =&gt; <span style="color: #819cd6; font-weight: bold;">new</span> <span style="color: #b0a2e7;">Date</span><span style="color: #ff4500; font-weight: bold;">()</span>.getFullYear<span style="color: #ff4500; font-weight: bold;">()</span> - age <span style="color: #6e7899; font-style: italic;">//</span><span style="color: #6e7899; font-style: italic;">&#26356;&#31616;&#21270;&#30340;&#20989;&#25968;&#25805;&#20316;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcb123f8" class="outline-3">
<h3 id="orgcb123f8"><span class="section-number-3">3.2</span> 解构props</h3>
<div class="outline-text-3" id="text-3-2">
<p>
before:
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">Hello</span> = <span style="color: #ff4500; font-weight: bold;">(</span>props<span style="color: #ff4500; font-weight: bold;">)</span> =&gt; <span style="color: #ff4500; font-weight: bold;">{</span>
  <span style="color: #819cd6; font-weight: bold;">return</span> <span style="color: #ffd700; font-weight: bold;">(</span>
    &lt;div&gt;
      &lt;p&gt;
        Hello <span style="color: #ffff00; font-weight: bold;">{</span>props.name<span style="color: #ffff00; font-weight: bold;">}</span>, you are <span style="color: #ffff00; font-weight: bold;">{</span>props.age<span style="color: #ffff00; font-weight: bold;">}</span> years old
      &lt;/p&gt;
    &lt;/div&gt;
  <span style="color: #ffd700; font-weight: bold;">)</span>
<span style="color: #ff4500; font-weight: bold;">}</span>
</pre>
</div>
<p>
after:
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">Hello</span> = <span style="color: #ff4500; font-weight: bold;">(</span><span style="color: #ffd700; font-weight: bold;">{</span>name, age<span style="color: #ffd700; font-weight: bold;">}</span><span style="color: #ff4500; font-weight: bold;">)</span> =&gt; <span style="color: #ff4500; font-weight: bold;">{</span> <span style="color: #6e7899; font-style: italic;">//</span><span style="color: #6e7899; font-style: italic;">&#30452;&#25509;&#20540;&#21462;&#20195;props&#21487;&#20197;&#30452;&#25509;&#29992;</span>
    <span style="color: #819cd6; font-weight: bold;">return</span> <span style="color: #ffd700; font-weight: bold;">(</span>
        &lt;div&gt;
            &lt;p&gt;
                Hello <span style="color: #ffff00; font-weight: bold;">{</span>name<span style="color: #ffff00; font-weight: bold;">}</span>, you are <span style="color: #ffff00; font-weight: bold;">{</span>age<span style="color: #ffff00; font-weight: bold;">}</span> years old
            &lt;/p&gt;
        &lt;/div&gt;
    <span style="color: #ffd700; font-weight: bold;">)</span>
<span style="color: #ff4500; font-weight: bold;">}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org1e3eef2" class="outline-3">
<h3 id="org1e3eef2"><span class="section-number-3">3.3</span> 页面重渲染</h3>
<div class="outline-text-3" id="text-3-3">
<p>
重新调用一次ReactDOM.render即可重新渲染 !不推荐!
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">let</span> <span style="color: #a6c1e0;">refresh</span> = <span style="color: #ff4500; font-weight: bold;">()</span> =&gt; <span style="color: #ff4500; font-weight: bold;">{</span>
    ReactDOM.render<span style="color: #ffd700; font-weight: bold;">(</span>&lt;App counter=<span style="color: #ffff00; font-weight: bold;">{</span>counter<span style="color: #ffff00; font-weight: bold;">}</span> /&gt;,
                    document.getElementById<span style="color: #ffff00; font-weight: bold;">(</span><span style="color: #5b94ab;">'root'</span><span style="color: #ffff00; font-weight: bold;">)</span><span style="color: #ffd700; font-weight: bold;">)</span>
<span style="color: #ff4500; font-weight: bold;">}</span>
</pre>
</div>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">let</span> <span style="color: #a6c1e0;">counter</span> = 1
refresh<span style="color: #ff4500; font-weight: bold;">()</span>
counter += 1
refresh<span style="color: #ff4500; font-weight: bold;">()</span>
counter += 1
refresh<span style="color: #ff4500; font-weight: bold;">()</span>
</pre>
</div>
<p>
通过setInterval延时操作即可观测到
</p>
<div class="org-src-container">
<pre class="src src-js">setInterval<span style="color: #ff4500; font-weight: bold;">(</span><span style="color: #ffd700; font-weight: bold;">()</span> =&gt; <span style="color: #ffd700; font-weight: bold;">{</span>
    refresh<span style="color: #ffff00; font-weight: bold;">()</span>
    counter += 1
<span style="color: #ffd700; font-weight: bold;">}</span>, 1000<span style="color: #ff4500; font-weight: bold;">)</span> <span style="color: #6e7899; font-style: italic;">//</span><span style="color: #6e7899; font-style: italic;">&#36825;&#26159;&#20010;&#27599;&#31186;&#30456;&#21152;&#30340;&#27515;&#24490;&#29615;</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org2cc56e5" class="outline-3">
<h3 id="org2cc56e5"><span class="section-number-3">3.4</span> 有状态组件</h3>
<div class="outline-text-3" id="text-3-4">
<p>
State Hook:<a href="https://zh-hans.reactjs.org/docs/hooks-state.html">https://zh-hans.reactjs.org/docs/hooks-state.html</a>
</p>

<p>
导入:
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">import</span> React, <span style="color: #ff4500; font-weight: bold;">{</span> useState <span style="color: #ff4500; font-weight: bold;">}</span> from <span style="color: #5b94ab;">'react'</span> <span style="color: #6e7899; font-style: italic;">//</span>
</pre>
</div>
<p>
调用state，用0进行初始化counter
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #ff4500; font-weight: bold;">[</span> <span style="color: #a6c1e0;">counter</span>, <span style="color: #a6c1e0;">setCounter</span> <span style="color: #ff4500; font-weight: bold;">]</span> = useState<span style="color: #ff4500; font-weight: bold;">(</span>0<span style="color: #ff4500; font-weight: bold;">)</span> <span style="color: #6e7899; font-style: italic;">//</span><span style="color: #6e7899; font-style: italic;">&#35299;&#26500;&#36171;&#20540;&#35821;&#27861;&#23558;&#20803;&#32032;&#20998;&#37197;&#32473;x&#21644;&#25805;&#20316;x</span>
</pre>
</div>
<p>
setTimeout函数会操作setCounter函数进行+1、1秒计时
</p>
<div class="org-src-container">
<pre class="src src-js">setTimeout<span style="color: #ff4500; font-weight: bold;">(</span>
  <span style="color: #ffd700; font-weight: bold;">()</span> =&gt; setCounter<span style="color: #ffd700; font-weight: bold;">(</span>counter + 1<span style="color: #ffd700; font-weight: bold;">)</span>, <span style="color: #6e7899; font-style: italic;">//</span><span style="color: #6e7899; font-style: italic;">&#20316;&#20026;&#31532;&#19968;&#20010;&#21442;&#25968;</span>
  1000 <span style="color: #6e7899; font-style: italic;">//</span><span style="color: #6e7899; font-style: italic;">&#31532;&#20108;&#20010;&#21442;&#25968;&#65292;&#24310;&#36831;&#19968;&#31186;</span>
<span style="color: #ff4500; font-weight: bold;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd8410a6" class="outline-3">
<h3 id="orgd8410a6"><span class="section-number-3">3.5</span> 鼠标事件处理</h3>
<div class="outline-text-3" id="text-3-5">
<p>
onClick连接到函数即可
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">handleClick</span> = <span style="color: #ff4500; font-weight: bold;">()</span> =&gt; <span style="color: #ff4500; font-weight: bold;">{</span>
  console.log<span style="color: #ffd700; font-weight: bold;">(</span><span style="color: #5b94ab;">'clicked'</span><span style="color: #ffd700; font-weight: bold;">)</span>
<span style="color: #ff4500; font-weight: bold;">}</span>
<span style="color: #819cd6; font-weight: bold;">return</span> <span style="color: #ff4500; font-weight: bold;">(</span>
        &lt;button onClick=<span style="color: #ffd700; font-weight: bold;">{</span>handleClick<span style="color: #ffd700; font-weight: bold;">}</span>&gt;click&lt;/button&gt;
<span style="color: #ff4500; font-weight: bold;">)</span>
</pre>
</div>
<p>
也可以直接定义
</p>
<div class="org-src-container">
<pre class="src src-js">&lt;button onClick= <span style="color: #ff4500; font-weight: bold;">{</span> <span style="color: #ffd700; font-weight: bold;">()</span> =&gt; setCounter<span style="color: #ffd700; font-weight: bold;">(</span>counter + 1<span style="color: #ffd700; font-weight: bold;">)</span><span style="color: #ff4500; font-weight: bold;">}</span>&gt;
</pre>
</div>
<p>
利于重用:
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">Button</span> = <span style="color: #ff4500; font-weight: bold;">(</span>props<span style="color: #ff4500; font-weight: bold;">)</span> =&gt; <span style="color: #ff4500; font-weight: bold;">{</span>
    <span style="color: #819cd6; font-weight: bold;">return</span> <span style="color: #ffd700; font-weight: bold;">(</span>
        &lt;button onClick = <span style="color: #ffff00; font-weight: bold;">{</span>props.handleClick<span style="color: #ffff00; font-weight: bold;">}</span>&gt;
            <span style="color: #ffff00; font-weight: bold;">{</span>props.text<span style="color: #ffff00; font-weight: bold;">}</span>
        &lt;/button&gt;
    <span style="color: #ffd700; font-weight: bold;">)</span>
<span style="color: #ff4500; font-weight: bold;">}</span>

<span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">App</span> = <span style="color: #ff4500; font-weight: bold;">()</span> =&gt; <span style="color: #ff4500; font-weight: bold;">{</span>
    <span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #ffd700; font-weight: bold;">[</span> <span style="color: #a6c1e0;">counter</span>, <span style="color: #a6c1e0;">setCounter</span> <span style="color: #ffd700; font-weight: bold;">]</span> = useState<span style="color: #ffd700; font-weight: bold;">(</span>0<span style="color: #ffd700; font-weight: bold;">)</span>
    <span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">addByone</span> = <span style="color: #ffd700; font-weight: bold;">()</span> =&gt; setCounter<span style="color: #ffd700; font-weight: bold;">(</span>counter + 1<span style="color: #ffd700; font-weight: bold;">)</span>
    <span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">setZero</span> = <span style="color: #ffd700; font-weight: bold;">()</span> =&gt; setCounter<span style="color: #ffd700; font-weight: bold;">(</span>0<span style="color: #ffd700; font-weight: bold;">)</span>
    <span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">cutByone</span> = <span style="color: #ffd700; font-weight: bold;">()</span> =&gt; setCounter<span style="color: #ffd700; font-weight: bold;">(</span>counter - 1<span style="color: #ffd700; font-weight: bold;">)</span>
    console.log<span style="color: #ffd700; font-weight: bold;">(</span><span style="color: #5b94ab;">'rendering...'</span>, counter<span style="color: #ffd700; font-weight: bold;">)</span>
    <span style="color: #819cd6; font-weight: bold;">return</span> <span style="color: #ffd700; font-weight: bold;">(</span>
        &lt;div&gt;
            &lt;Display counter = <span style="color: #ffff00; font-weight: bold;">{</span>counter<span style="color: #ffff00; font-weight: bold;">}</span>/&gt;
            &lt;Button handleClick= <span style="color: #ffff00; font-weight: bold;">{</span>addByone<span style="color: #ffff00; font-weight: bold;">}</span> text=<span style="color: #5b94ab;">'plus'</span> /&gt;
            &lt;Button handleClick= <span style="color: #ffff00; font-weight: bold;">{</span>setZero<span style="color: #ffff00; font-weight: bold;">}</span> text = <span style="color: #5b94ab;">'zero'</span> /&gt;
            &lt;Button handleClick= <span style="color: #ffff00; font-weight: bold;">{</span>cutByone<span style="color: #ffff00; font-weight: bold;">}</span> text = <span style="color: #5b94ab;">'minus'</span> /&gt;
        &lt;/div&gt;
    <span style="color: #ffd700; font-weight: bold;">)</span>
<span style="color: #ff4500; font-weight: bold;">}</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgeb62f44" class="outline-2">
<h2 id="orgeb62f44"><span class="section-number-2">4</span> 1d</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org7459765" class="outline-3">
<h3 id="org7459765"><span class="section-number-3">4.1</span> 复杂状态(多useState处理)</h3>
<div class="outline-text-3" id="text-4-1">
<p>
多个useState怎么办? -&gt; before: 单独处理
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">App</span> = <span style="color: #ff4500; font-weight: bold;">()</span> =&gt; <span style="color: #ff4500; font-weight: bold;">{</span>
  <span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #ffd700; font-weight: bold;">[</span><span style="color: #a6c1e0;">left</span>, <span style="color: #a6c1e0;">setLeft</span><span style="color: #ffd700; font-weight: bold;">]</span> = useState<span style="color: #ffd700; font-weight: bold;">(</span>0<span style="color: #ffd700; font-weight: bold;">)</span>
  <span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #ffd700; font-weight: bold;">[</span><span style="color: #a6c1e0;">right</span>, <span style="color: #a6c1e0;">setRight</span><span style="color: #ffd700; font-weight: bold;">]</span> = useState<span style="color: #ffd700; font-weight: bold;">(</span>0<span style="color: #ffd700; font-weight: bold;">)</span>

  <span style="color: #819cd6; font-weight: bold;">return</span> <span style="color: #ffd700; font-weight: bold;">(</span>
        &lt;button onClick=<span style="color: #ffff00; font-weight: bold;">{</span><span style="color: #00ff7f; font-weight: bold;">()</span> =&gt; setLeft<span style="color: #00ff7f; font-weight: bold;">(</span>left + 1<span style="color: #00ff7f; font-weight: bold;">)</span><span style="color: #ffff00; font-weight: bold;">}</span>&gt;&lt;/button&gt;
        &lt;button onClick=<span style="color: #ffff00; font-weight: bold;">{</span><span style="color: #00ff7f; font-weight: bold;">()</span> =&gt; setRight<span style="color: #00ff7f; font-weight: bold;">(</span>right + 1<span style="color: #00ff7f; font-weight: bold;">)</span><span style="color: #ffff00; font-weight: bold;">}</span>&gt;&lt;/button&gt;
  <span style="color: #ffd700; font-weight: bold;">)</span>
<span style="color: #ff4500; font-weight: bold;">}</span>
</pre>
</div>
<p>
after: 一起处理
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">App</span> = <span style="color: #ff4500; font-weight: bold;">()</span> =&gt; <span style="color: #ff4500; font-weight: bold;">{</span>
  <span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #ffd700; font-weight: bold;">[</span><span style="color: #a6c1e0;">clicks</span>, <span style="color: #a6c1e0;">setClicks</span><span style="color: #ffd700; font-weight: bold;">]</span> = useState<span style="color: #ffd700; font-weight: bold;">(</span><span style="color: #ffff00; font-weight: bold;">{</span>
    left: 0, right: 0
  <span style="color: #ffff00; font-weight: bold;">}</span><span style="color: #ffd700; font-weight: bold;">)</span>

  <span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">handleLeftClick</span> = <span style="color: #ffd700; font-weight: bold;">()</span> =&gt; <span style="color: #ffd700; font-weight: bold;">{</span>
    <span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">newClicks</span> = <span style="color: #ffff00; font-weight: bold;">{</span> 
      left: clicks.left + 1, 
      right: clicks.right 
    <span style="color: #ffff00; font-weight: bold;">}</span>
    setClicks<span style="color: #ffff00; font-weight: bold;">(</span>newClicks<span style="color: #ffff00; font-weight: bold;">)</span>
  <span style="color: #ffd700; font-weight: bold;">}</span>
    ................
        right: clicks.right + 1
    ................
  <span style="color: #819cd6; font-weight: bold;">return</span> <span style="color: #ffd700; font-weight: bold;">(</span>
        &lt;button onClick=<span style="color: #ffff00; font-weight: bold;">{</span>handleLeftClick<span style="color: #ffff00; font-weight: bold;">}</span>&gt;left&lt;/button&gt;
        &lt;button onClick=<span style="color: #ffff00; font-weight: bold;">{</span>handleRightClick<span style="color: #ffff00; font-weight: bold;">}</span>&gt;right&lt;/button&gt;
  <span style="color: #ffd700; font-weight: bold;">)</span>
<span style="color: #ff4500; font-weight: bold;">}</span>
</pre>
</div>
<p>
after: 使用展开语法更加简洁 recommend -&gt;
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">handleLeftClick</span> = <span style="color: #ff4500; font-weight: bold;">()</span> =&gt;
  setClicks<span style="color: #ff4500; font-weight: bold;">(</span><span style="color: #ffd700; font-weight: bold;">{</span> ...clicks, left: clicks.left + 1 <span style="color: #ffd700; font-weight: bold;">}</span><span style="color: #ff4500; font-weight: bold;">)</span>
  <span style="color: #6e7899; font-style: italic;">//</span><span style="color: #6e7899; font-style: italic;">&#21019;&#24314;&#20102;clicks&#23545;&#35937;&#30340;&#21103;&#26412;&#65292;&#20854;&#20013;left&#23646;&#24615;&#30340;&#20540;&#22686;&#21152;&#20102;1</span>
  <span style="color: #6e7899; font-style: italic;">//</span><span style="color: #6e7899; font-style: italic;">&#28982;&#21518;&#20256;&#32473;setClicks</span>
<span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">handleRightClick</span> = <span style="color: #ff4500; font-weight: bold;">()</span> =&gt;
  setClicks<span style="color: #ff4500; font-weight: bold;">(</span><span style="color: #ffd700; font-weight: bold;">{</span> ...clicks, right: clicks.right + 1 <span style="color: #ffd700; font-weight: bold;">}</span><span style="color: #ff4500; font-weight: bold;">)</span>
</pre>
</div>
<p>
展开语法 { &#x2026;clicks } 创建了一个新对象，该对象具有clicks所有对象的副本，React 中状态不可直接修改所以这样做
</p>
</div>
</div>
<div id="outline-container-org15347e1" class="outline-3">
<h3 id="org15347e1"><span class="section-number-3">4.2</span> 处理数组</h3>
<div class="outline-text-3" id="text-4-2">
<p>
useState操作数组:
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #ff4500; font-weight: bold;">[</span><span style="color: #a6c1e0;">allClicks</span>, <span style="color: #a6c1e0;">setAll</span><span style="color: #ff4500; font-weight: bold;">]</span> = useState<span style="color: #ff4500; font-weight: bold;">(</span><span style="color: #ffd700; font-weight: bold;">[]</span><span style="color: #ff4500; font-weight: bold;">)</span>
</pre>
</div>
<p>
添加元素:
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">handleLeftClick</span> = <span style="color: #ff4500; font-weight: bold;">()</span> =&gt; <span style="color: #ff4500; font-weight: bold;">{</span>
  setAll<span style="color: #ffd700; font-weight: bold;">(</span>allClicks.concat<span style="color: #ffff00; font-weight: bold;">(</span><span style="color: #5b94ab;">'L'</span><span style="color: #ffff00; font-weight: bold;">)</span><span style="color: #ffd700; font-weight: bold;">)</span><span style="color: #6e7899; font-style: italic;">//</span>
  <span style="color: #6e7899; font-style: italic;">//</span><span style="color: #6e7899; font-style: italic;">&#35201;&#29992;concat&#65292;&#19981;&#25913;&#21464;&#29616;&#26377;&#25968;&#32452;&#65292;&#32780;&#26159;&#36820;&#22238;&#25968;&#32452;&#26032;&#21103;&#26412;&#65292;&#24182;&#23558;&#20803;&#32032;&#28155;&#21152;&#21040;&#35813;&#25968;&#32452;&#20013;&#12290;</span>
  <span style="color: #6e7899; font-style: italic;">//</span><span style="color: #6e7899; font-style: italic;">&#19981;&#35201;&#29992;push&#65292;React &#32452;&#20214;(&#22914; allClicks )&#30340;&#29366;&#24577;&#19981;&#33021;&#30452;&#25509;&#26356;&#25913;</span>
<span style="color: #ff4500; font-weight: bold;">}</span>
</pre>
</div>
<p>
使用join把元素连接起来显示:
</p>
<div class="org-src-container">
<pre class="src src-js">&lt;p&gt;<span style="color: #ff4500; font-weight: bold;">{</span>allClicks.join<span style="color: #ffd700; font-weight: bold;">(</span><span style="color: #5b94ab;">' '</span><span style="color: #ffd700; font-weight: bold;">)</span><span style="color: #ff4500; font-weight: bold;">}</span>&lt;/p&gt;
</pre>
</div>
</div>
</div>
<div id="outline-container-org2998436" class="outline-3">
<h3 id="org2998436"><span class="section-number-3">4.3</span> 条件渲染</h3>
<div class="outline-text-3" id="text-4-3">
<p>
if:
</p>
<div class="org-src-container">
<pre class="src src-js"><span style="color: #819cd6; font-weight: bold;">const</span> <span style="color: #a6c1e0;">History</span> = <span style="color: #ff4500; font-weight: bold;">(</span>props<span style="color: #ff4500; font-weight: bold;">)</span> =&gt; <span style="color: #ff4500; font-weight: bold;">{</span>
  <span style="color: #819cd6; font-weight: bold;">if</span> <span style="color: #ffd700; font-weight: bold;">(</span>props.allClicks.length === 0<span style="color: #ffd700; font-weight: bold;">)</span> <span style="color: #ffd700; font-weight: bold;">{</span>
    <span style="color: #819cd6; font-weight: bold;">return</span> <span style="color: #ffff00; font-weight: bold;">(</span>
      &lt;div&gt;
        the app is used by pressing the buttons
      &lt;/div&gt;
    <span style="color: #ffff00; font-weight: bold;">)</span>
  <span style="color: #ffd700; font-weight: bold;">}</span>

  <span style="color: #819cd6; font-weight: bold;">return</span> <span style="color: #ffd700; font-weight: bold;">(</span>
    &lt;div&gt;
      button press history: <span style="color: #ffff00; font-weight: bold;">{</span>props.allClicks.join<span style="color: #00ff7f; font-weight: bold;">(</span><span style="color: #5b94ab;">' '</span><span style="color: #00ff7f; font-weight: bold;">)</span><span style="color: #ffff00; font-weight: bold;">}</span>
    &lt;/div&gt;
  <span style="color: #ffd700; font-weight: bold;">)</span>
<span style="color: #ff4500; font-weight: bold;">}</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org7a7aad1" class="outline-3">
<h3 id="org7a7aad1"><span class="section-number-3">4.4</span> Hook的规则</h3>
<div class="outline-text-3" id="text-4-4">
<p>
不能从循环、条件表达式或任何不是定义组件的函数的地方调用 useState，要用箭头函数进行事件处理
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2020-07-04 Sat 00:00</p>
<p class="author">Author: keke</p>
<p class="date">Created: 2020-07-15 Wed 17:55</p>
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 27.0.91 (<a href="https://orgmode.org">Org</a> mode 9.3)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
