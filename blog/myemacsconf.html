<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-10-11 Sun 17:38 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>My Emacs Configure</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="keke" />
<link rel="stylesheet" type="text/css" href="css/m-dark.css" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,400i,600%7CSource+Sans+Pro:400,400i,600&amp;subset=latin-ext" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">My Emacs Configure</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org137b82d">1. Straight.el</a></li>
<li><a href="#org2d53c79">2. Is A?</a></li>
<li><a href="#org6b4eaf6">3. Is graphic?</a></li>
<li><a href="#org027cccd">4. UI</a></li>
<li><a href="#orgeb8bee1">5. Editor</a></li>
<li><a href="#orgec75e6a">6. Package</a>
<ul>
<li><a href="#orge8470f2">6.1. Roam</a></li>
<li><a href="#org6eb5e14">6.2. Which-key</a></li>
<li><a href="#org89fdd85">6.3. emacs-rime</a></li>
<li><a href="#orgeaa8bd5">6.4. helm</a></li>
<li><a href="#org168ddf3">6.5. ace-window</a></li>
<li><a href="#org37b9be4">6.6. exec-path-from-shell</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="figure">
<p><img src="./2020-10-11_17-31.png" alt="2020-10-11_17-31.png" />
</p>
</div>
<ul class="org-ul">
<li>this is my curreent emacs config, old archive see other branch</li>
<li>git clone me, and run:</li>
</ul>
<div class="org-src-container">
<pre class="src src-shell">git submodule update --init --recursive
</pre>
</div>
<div id="outline-container-org137b82d" class="outline-2">
<h2 id="org137b82d"><span class="section-number-2">1</span> Straight.el</h2>
<div class="outline-text-2" id="text-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(defvar bootstrap-version)
(let ((bootstrap-file
       (expand-file-name "straight/repos/straight.el/bootstrap.el" user-emacs-directory))
      (bootstrap-version 5))
  (unless (file-exists-p bootstrap-file)
    (with-current-buffer
	(url-retrieve-synchronously
	 "https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el"
	 'silent 'inhibit-cookies)
      (goto-char (point-max))
      (eval-print-last-sexp)))
  (load bootstrap-file nil 'nomessage))
</pre>
</div>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(straight-use-package 'use-package)
(straight-use-package 'magit)
(straight-use-package 'vterm)
(straight-use-package 'terraform-mode)
</pre>
</div>
</div>
</div>
<div id="outline-container-org2d53c79" class="outline-2">
<h2 id="org2d53c79"><span class="section-number-2">2</span> Is A?</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(defconst *is-a-mac* (eq system-type 'darwin))
(defconst *is-a-linux* (eq system-type 'gnu/linux))
;; if the default directory not '~/',fix it.
(when *is-a-mac*
  (setq command-line-default-directory "~/"))
</pre>
</div>
</div>
</div>
<div id="outline-container-org6b4eaf6" class="outline-2">
<h2 id="org6b4eaf6"><span class="section-number-2">3</span> Is graphic?</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(defun graphic-p ()
  (display-graphic-p))
</pre>
</div>
</div>
</div>
<div id="outline-container-org027cccd" class="outline-2">
<h2 id="org027cccd"><span class="section-number-2">4</span> UI</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(when (graphic-p)
  ;;  transparent frame
  (add-to-list 'default-frame-alist'(ns-transparent-titlebar . t))
  (add-to-list 'default-frame-alist'(ns-appearance . dark))
  (add-to-list 'default-frame-alist'(alpha . (80 . 75)))
  (menu-bar-mode -1)
  (scroll-bar-mode -1)
  (global-linum-mode 1)
  (tool-bar-mode -1)
  (setq org-startup-with-inline-images t)
  ;; default frame size
  ;;      (setq initial-frame-alist
  ;;	    '(
  ;;	      (width . 106)
  ;;	      (height . 56)
  ;;	      )))
  )
(display-time-mode 1)
;; teansparent title(mac only)
(when (memq window-system '(mac ns))
  (menu-bar-mode 1)
  (add-to-list 'default-frame-alist '(ns-appearance . dark)) ; nil for dark text
  (add-to-list 'default-frame-alist '(ns-transparent-titlebar . t)))

;; 指定模式禁用行号
(add-hook 'vterm-mode-hook 'my-inhibit-global-linum-mode)
(defun my-inhibit-global-linum-mode ()
  "Counter-act `global-linum-mode'."
  (add-hook 'after-change-major-mode-hook
	    (lambda () (linum-mode 0))
	    :append :local))
;; 字体设置
(when (graphic-p)
  (let ((emacs-font-size 13)
	(emacs-font-name "Rec Mono Linear"))
    (set-frame-font (format "%s-%s" (eval emacs-font-name) (eval emacs-font-size)))
    (set-fontset-font (frame-parameter nil 'font) 'unicode (eval emacs-font-name)))
  (with-eval-after-load 'org
    (defun org-buffer-face-mode-variable ()
      (interactive)
      (make-face 'width-font-face)
      (set-face-attribute 'width-font-face nil :font "Sarasa Mono SC 15")
      (setq buffer-face-mode-face 'width-font-face)
      (buffer-face-mode))
    (add-hook 'org-mode-hook 'org-buffer-face-mode-variable)))

(if (version&lt; "27.0" emacs-version)
    (set-fontset-font
     "fontset-default" 'unicode "Apple Color Emoji" nil 'prepend)
  (set-fontset-font
   t 'symbol (font-spec :family "Apple Color Emoji") nil 'prepend))
;; theme
(use-package lazycat-theme
  :load-path "~/.emacs.d/site-lisp/lazycat-theme")
(straight-use-package 'modus-operandi-theme)
(straight-use-package 'modus-vivendi-theme)
(straight-use-package 'circadian)
(use-package
  circadian
  :config
  ;; 经纬度，可以在https://www.latlong.net/获取，默认是广州的
  (setq calendar-latitude 35.388779
	calendar-longitude 116.084290)
  ;; sunrise 白天用的主题 sunset 晚上用的主题
  (setq circadian-themes '((:sunrise . lazycat-light)
			   (:sunset . lazycat-dark)))
  (circadian-setup))
;; mode-line
(use-package awesome-tray
  :load-path "~/.emacs.d/site-lisp/awesome-tray"
  :init
  (require 'awesome-tray)
  (awesome-tray-mode 1))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgeb8bee1" class="outline-2">
<h2 id="orgeb8bee1"><span class="section-number-2">5</span> Editor</h2>
<div class="outline-text-2" id="text-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">;; 自动加载外部修改过的文件
(global-auto-revert-mode 1)
;; 关闭自己生产的保存文件
(setq auto-save-default nil)
;; 关闭自己生产的备份文件
(setq make-backup-files nil)
;; 选中某个区域继续编辑可以替换掉该区域
(delete-selection-mode 1)
;; 设置h 文件默认为c++文件
(add-to-list 'auto-mode-alist '("\\.h\\'" . c++-mode))
;; orgmode
(add-hook 'org-mode-hook (lambda () (setq truncate-lines nil)))
;; without lock files
(setq create-lockfiles nil)
;; y-or-n
(fset 'yes-or-no-p 'y-or-n-p)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgec75e6a" class="outline-2">
<h2 id="orgec75e6a"><span class="section-number-2">6</span> Package</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-orge8470f2" class="outline-3">
<h3 id="orge8470f2"><span class="section-number-3">6.1</span> Roam</h3>
<div class="outline-text-3" id="text-6-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">;;(straight-use-package 'org-roam)
;;(straight-use-package 'org-roam-server)
;;(use-package org-roam
;;  :hook
;;  (after-init . org-roam-mode)
;;  :custom
;;  (org-roam-directory "~/src/org/roam")
;;  :bind (:map org-roam-mode-map
;;	      (("C-c n l" . org-roam)
;;	       ("C-c n f" . org-roam-find-file)
;;	       ("C-c n g" . org-roam-graph-show))
;;	      :map org-mode-map
;;	      (("C-c n i" . org-roam-insert))
;;	      (("C-c n I" . org-roam-insert-immediate))))
;;(use-package org-roam-server
;;  :config
;;  (setq org-roam-server-host "127.0.0.1"
;;      org-roam-server-port 9090
;;      org-roam-server-export-inline-images t
;;      org-roam-server-authenticate nil
;;      org-roam-server-label-truncate t
;;      org-roam-server-label-truncate-length 60
;;      org-roam-server-label-wrap-length 20)
;;  (org-roam-server-mode)
;;  (require 'org-roam-protocol))
;;
</pre>
</div>
</div>
</div>
<div id="outline-container-org6eb5e14" class="outline-3">
<h3 id="org6eb5e14"><span class="section-number-3">6.2</span> Which-key</h3>
<div class="outline-text-3" id="text-6-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(straight-use-package 'which-key)
(use-package which-key
  :config
  (which-key-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-org89fdd85" class="outline-3">
<h3 id="org89fdd85"><span class="section-number-3">6.3</span> emacs-rime</h3>
<div class="outline-text-3" id="text-6-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(when (graphic-p)
  (when *is-a-linux*
    (use-package rime
      :straight (rime :type git
		      :host github
		      :repo "DogLooksGood/emacs-rime"
		      :files ("*.el" "Makefile" "lib.c"))
      :custom
      (default-input-method "rime")
      (rime-show-candidate 'posframe))))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgeaa8bd5" class="outline-3">
<h3 id="orgeaa8bd5"><span class="section-number-3">6.4</span> helm</h3>
<div class="outline-text-3" id="text-6-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(straight-use-package 'helm)
(global-set-key (kbd "M-x") #'helm-M-x)
(global-set-key (kbd "C-x r b") #'helm-filtered-bookmarks)
(global-set-key (kbd "C-x C-f") #'helm-find-files)
(helm-mode 1)
</pre>
</div>
</div>
</div>
<div id="outline-container-org168ddf3" class="outline-3">
<h3 id="org168ddf3"><span class="section-number-3">6.5</span> ace-window</h3>
<div class="outline-text-3" id="text-6-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(straight-use-package 'ace-window)
(global-set-key (kbd "M-o") 'ace-window)
(setq aw-dispatch-always t)
</pre>
</div>
</div>
</div>
<div id="outline-container-org37b9be4" class="outline-3">
<h3 id="org37b9be4"><span class="section-number-3">6.6</span> exec-path-from-shell</h3>
<div class="outline-text-3" id="text-6-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">;; if macos can't use path, fix it
(straight-use-package 'exec-path-from-shell)
(when (memq window-system '(mac ns x))
  (exec-path-from-shell-initialize))
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2020-09-13 Sun 00:00</p>
<p class="author">Author: keke</p>
<p class="date">Created: 2020-10-11 Sun 17:38</p>
<p class="creator"><a href="https://www.gnu.org/software/emacs/">Emacs</a> 27.1 (<a href="https://orgmode.org">Org</a> mode 9.3)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
